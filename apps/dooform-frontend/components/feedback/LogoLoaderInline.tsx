"use client";

import { useRef } from "react";
import gsap from "gsap";
import { useGSAP } from "@gsap/react";

gsap.registerPlugin(useGSAP);

interface LogoLoaderInlineProps {
  size?: "sm" | "md" | "lg";
}

export default function LogoLoaderInline({ size = "md" }: LogoLoaderInlineProps) {
  const containerRef = useRef<HTMLDivElement>(null);
  const svgRef = useRef<SVGSVGElement>(null);

  const sizeMap = {
    sm: { width: 100, height: 20 },
    md: { width: 150, height: 30 },
    lg: { width: 200, height: 39 },
  };

  const { width, height } = sizeMap[size];

  useGSAP(
    () => {
      if (!svgRef.current) return;

      const paths = svgRef.current.querySelectorAll("path");
      const pathsArray = Array.from(paths).reverse();

      gsap.set(pathsArray, {
        opacity: 0,
        y: 15,
        scale: 0.7,
      });

      const tl = gsap.timeline({
        repeat: -1,
        repeatDelay: 0.3,
      });

      pathsArray.forEach((path, index) => {
        tl.to(
          path,
          {
            opacity: 1,
            y: 0,
            scale: 1,
            duration: 0.4,
            ease: "back.out(2)",
          },
          index * 0.08
        );
      });

      tl.to(
        pathsArray,
        {
          scale: 1.05,
          duration: 0.1,
          ease: "power2.out",
        },
        "+=0.2"
      )
        .to(pathsArray, {
          scale: 1,
          duration: 0.1,
          ease: "power2.inOut",
        })
        .to(
          pathsArray,
          {
            opacity: 0,
            y: -10,
            scale: 0.8,
            duration: 0.3,
            stagger: 0.02,
            ease: "power2.in",
          },
          "+=0.3"
        );
    },
    { scope: containerRef }
  );

  return (
    <div ref={containerRef} className="flex items-center justify-center">
      <svg
        ref={svgRef}
        width={width}
        height={height}
        viewBox="0 0 124 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style={{ overflow: "visible" }}
      >
        <path
          d="M98.4092 23.68V6.81599H102.248L102.312 10.24L101.672 10.496C101.864 9.94132 102.152 9.42932 102.536 8.95998C102.92 8.46932 103.378 8.04265 103.911 7.67999C104.444 7.31732 105.009 7.03999 105.607 6.84799C106.204 6.63465 106.822 6.52799 107.462 6.52799C108.379 6.52799 109.189 6.67732 109.893 6.97599C110.597 7.27465 111.183 7.73332 111.652 8.35198C112.143 8.97065 112.516 9.75998 112.772 10.72L112.164 10.592L112.388 10.08C112.644 9.56798 112.985 9.09865 113.412 8.67198C113.838 8.24532 114.318 7.87198 114.851 7.55198C115.384 7.21065 115.939 6.95465 116.515 6.78399C117.112 6.61332 117.688 6.52799 118.242 6.52799C119.522 6.52799 120.588 6.78399 121.441 7.29599C122.294 7.80798 122.934 8.58665 123.36 9.63198C123.787 10.6773 124 11.968 124 13.504V23.68H120.065V13.76C120.065 12.48 119.81 11.5306 119.298 10.912C118.807 10.2933 118.039 9.98398 116.995 9.98398C116.44 9.98398 115.928 10.08 115.459 10.272C114.99 10.4426 114.574 10.6986 114.212 11.04C113.87 11.36 113.604 11.744 113.412 12.192C113.22 12.6186 113.124 13.0986 113.124 13.632V23.68H109.189V13.728C109.189 12.512 108.923 11.584 108.39 10.944C107.878 10.304 107.142 9.98398 106.182 9.98398C105.628 9.98398 105.116 10.08 104.647 10.272C104.199 10.4426 103.794 10.6986 103.431 11.04C103.09 11.36 102.824 11.7333 102.632 12.16C102.44 12.5866 102.344 13.056 102.344 13.568V23.68H98.4092Z"
          fill="#000091"
        />
        <path
          d="M86.6087 23.68V6.81602H90.4474L90.5113 12.192L89.9995 10.976C90.2341 10.1227 90.6393 9.35468 91.2151 8.67202C91.7909 7.98935 92.452 7.45602 93.1984 7.07202C93.9661 6.66669 94.7551 6.46402 95.5655 6.46402C95.9281 6.46402 96.2693 6.49602 96.5892 6.56002C96.9304 6.62402 97.2076 6.69869 97.4209 6.78402L96.3972 11.072C96.1413 10.944 95.8428 10.848 95.5015 10.784C95.1817 10.6987 94.8511 10.656 94.5099 10.656C93.9554 10.656 93.433 10.7627 92.9425 10.976C92.4733 11.168 92.0574 11.4453 91.6949 11.808C91.3537 12.1707 91.0765 12.5973 90.8632 13.088C90.6499 13.5573 90.5433 14.08 90.5433 14.656V23.68H86.6087Z"
          fill="#000091"
        />
        <path
          d="M75.9551 24C74.2704 24 72.7669 23.6267 71.4447 22.88C70.1225 22.112 69.0776 21.0667 68.3098 19.744C67.5634 18.4213 67.1902 16.9173 67.1902 15.232C67.1902 13.5467 67.5634 12.0427 68.3098 10.72C69.0776 9.39735 70.1225 8.36269 71.4447 7.61602C72.7669 6.84802 74.2704 6.46402 75.9551 6.46402C77.6185 6.46402 79.1113 6.84802 80.4335 7.61602C81.7557 8.36269 82.79 9.39735 83.5364 10.72C84.3041 12.0427 84.688 13.5467 84.688 15.232C84.688 16.9173 84.3041 18.4213 83.5364 19.744C82.79 21.0667 81.7557 22.112 80.4335 22.88C79.1113 23.6267 77.6185 24 75.9551 24ZM75.9551 20.512C76.8721 20.512 77.6931 20.288 78.4182 19.84C79.1433 19.3707 79.7084 18.7413 80.1136 17.952C80.5401 17.1413 80.7427 16.2347 80.7214 15.232C80.7427 14.208 80.5401 13.3013 80.1136 12.512C79.7084 11.7013 79.1433 11.072 78.4182 10.624C77.6931 10.176 76.8721 9.95202 75.9551 9.95202C75.0381 9.95202 74.2064 10.1867 73.46 10.656C72.7349 11.104 72.1698 11.7333 71.7646 12.544C71.3594 13.3333 71.1568 14.2293 71.1568 15.232C71.1568 16.2347 71.3594 17.1413 71.7646 17.952C72.1698 18.7413 72.7349 19.3707 73.46 19.84C74.2064 20.288 75.0381 20.512 75.9551 20.512Z"
          fill="#000091"
        />
        <path
          d="M59.4803 23.68V5.27999C59.4803 4.27733 59.7042 3.38133 60.152 2.592C60.5999 1.78133 61.2183 1.152 62.0073 0.703998C62.7964 0.234666 63.7027 0 64.7264 0C65.4514 0 66.1232 0.127999 66.7417 0.383998C67.3814 0.639999 67.9039 0.981331 68.3091 1.408L67.0935 4.31999C66.8163 4.10666 66.5177 3.93599 66.1978 3.80799C65.8993 3.65866 65.6114 3.58399 65.3342 3.58399C64.9076 3.58399 64.5451 3.65866 64.2465 3.80799C63.9693 3.93599 63.7561 4.13866 63.6068 4.41599C63.4788 4.69333 63.4148 5.03466 63.4148 5.43999V23.68H61.4316C61.069 23.68 60.7171 23.68 60.3759 23.68C60.056 23.68 59.7575 23.68 59.4803 23.68ZM56.8572 10.624V7.16799H67.2215V10.624H56.8572Z"
          fill="#000091"
        />
        <path
          d="M47.8838 24C46.1991 24 44.6956 23.6267 43.3734 22.88C42.0512 22.112 41.0063 21.0667 40.2385 19.744C39.4921 18.4213 39.1189 16.9173 39.1189 15.232C39.1189 13.5467 39.4921 12.0427 40.2385 10.72C41.0063 9.39735 42.0512 8.36269 43.3734 7.61602C44.6956 6.84802 46.1991 6.46402 47.8838 6.46402C49.5472 6.46402 51.04 6.84802 52.3622 7.61602C53.6844 8.36269 54.7187 9.39735 55.4651 10.72C56.2328 12.0427 56.6167 13.5467 56.6167 15.232C56.6167 16.9173 56.2328 18.4213 55.4651 19.744C54.7187 21.0667 53.6844 22.112 52.3622 22.88C51.04 23.6267 49.5472 24 47.8838 24ZM47.8838 20.512C48.8008 20.512 49.6218 20.288 50.3469 19.84C51.072 19.3707 51.6371 18.7413 52.0423 17.952C52.4688 17.1413 52.6714 16.2347 52.6501 15.232C52.6714 14.208 52.4688 13.3013 52.0423 12.512C51.6371 11.7013 51.072 11.072 50.3469 10.624C49.6218 10.176 48.8008 9.95202 47.8838 9.95202C46.9668 9.95202 46.1351 10.1867 45.3887 10.656C44.6636 11.104 44.0985 11.7333 43.6933 12.544C43.2881 13.3333 43.0855 14.2293 43.0855 15.232C43.0855 16.2347 43.2881 17.1413 43.6933 17.952C44.0985 18.7413 44.6636 19.3707 45.3887 19.84C46.1351 20.288 46.9668 20.512 47.8838 20.512Z"
          fill="#000091"
        />
        <path
          d="M29.553 24C27.8682 24 26.3648 23.6267 25.0426 22.88C23.7204 22.112 22.6754 21.0667 21.9077 19.744C21.1613 18.4213 20.7881 16.9173 20.7881 15.232C20.7881 13.5467 21.1613 12.0427 21.9077 10.72C22.6754 9.39735 23.7204 8.36269 25.0426 7.61602C26.3648 6.84802 27.8682 6.46402 29.553 6.46402C31.2164 6.46402 32.7092 6.84802 34.0314 7.61602C35.3535 8.36269 36.3878 9.39735 37.1342 10.72C37.902 12.0427 38.2858 13.5467 38.2858 15.232C38.2858 16.9173 37.902 18.4213 37.1342 19.744C36.3878 21.0667 35.3535 22.112 34.0314 22.88C32.7092 23.6267 31.2164 24 29.553 24ZM29.553 20.512C30.47 20.512 31.291 20.288 32.0161 19.84C32.7412 19.3707 33.3063 18.7413 33.7115 17.952C34.138 17.1413 34.3406 16.2347 34.3193 15.232C34.3406 14.208 34.138 13.3013 33.7115 12.512C33.3063 11.7013 32.7412 11.072 32.0161 10.624C31.291 10.176 30.47 9.95202 29.553 9.95202C28.636 9.95202 27.8043 10.1867 27.0579 10.656C26.3328 11.104 25.7677 11.7333 25.3625 12.544C24.9573 13.3333 24.7547 14.2293 24.7547 15.232C24.7547 16.2347 24.9573 17.1413 25.3625 17.952C25.7677 18.7413 26.3328 19.3707 27.0579 19.84C27.8043 20.288 28.636 20.512 29.553 20.512Z"
          fill="#000091"
        />
        <path
          d="M0 23.6799V1.27995H8.98878C10.6095 1.27995 12.0703 1.54661 13.3712 2.07995C14.6934 2.61328 15.8237 3.38128 16.762 4.38394C17.7003 5.38661 18.4254 6.57061 18.9372 7.93594C19.449 9.30127 19.7049 10.8159 19.7049 12.4799C19.7049 14.1439 19.449 15.6693 18.9372 17.0559C18.4254 18.4213 17.7003 19.6053 16.762 20.6079C15.845 21.5893 14.7254 22.3466 13.4032 22.8799C12.081 23.4133 10.6095 23.6799 8.98878 23.6799H0ZM4.12652 20.4479L3.83862 19.8399H8.82883C9.87379 19.8399 10.8121 19.6693 11.6438 19.3279C12.4755 18.9866 13.1686 18.5066 13.7231 17.8879C14.2989 17.2479 14.736 16.4693 15.0346 15.5519C15.3545 14.6346 15.5144 13.6106 15.5144 12.4799C15.5144 11.3493 15.3545 10.3359 15.0346 9.43994C14.736 8.5226 14.2989 7.74394 13.7231 7.10394C13.1473 6.46394 12.4435 5.97327 11.6118 5.63194C10.8015 5.29061 9.87379 5.11994 8.82883 5.11994H3.74266L4.12652 4.57594V20.4479Z"
          fill="#000091"
        />
      </svg>
    </div>
  );
}
